# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–∏—Å—Å–∏–π –≤ Jetton –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö

## üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –∫–æ–º–∏—Å—Å–∏–π

### 1. **Jetton Wallet Constants** (–∏–∑ `jetton-wallet.fc`)

```func
const min_tons_for_storage = 10000000; ;; 0.01 TON
const gas_consumption = 10000000;       ;; 0.01 TON
```

### 2. **Minter Constants** (–∏–∑ `constants.fc`)

```func
int const::min_tons_for_storage() asm "10000000 PUSHINT";        ;; 0.01 TON
int const::provide_address_gas_consumption() asm "10000000 PUSHINT"; ;; 0.01 TON
```

### 3. **–¢–µ–∫—É—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Ö —Å—Ç–æ–∏–º–æ—Å—Ç—å**

| –û–ø–µ—Ä–∞—Ü–∏—è | Gas | –ü–µ—Ä–µ—Å—ã–ª–∫–∞ | Storage | **–ò—Ç–æ–≥–æ** |
|----------|-----|-----------|---------|-----------|
| **Deploy Minter** | 0.01 | 0.02 | 0.01 | **~0.05 TON** |
| **Mint** | 0.01 | 0.02 | 0.02 | **~0.05 TON** |
| **Transfer** | 0.01 | 0.02-0.04 | 0.01 | **~0.04-0.06 TON** |
| **Burn** | 0.01 | 0.01 | - | **~0.02 TON** |

---

## ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** (–ú–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å)

### 1. **–£–º–µ–Ω—å—à–∏—Ç—å `min_tons_for_storage` –¥–æ 0.005 TON**

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (`jetton-wallet.fc:23`):
```func
const min_tons_for_storage = 10000000; ;; 0.01 TON
```

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π**:
```func
const min_tons_for_storage = 5000000; ;; 0.005 TON ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
```

**–≠–∫–æ–Ω–æ–º–∏—è**: `0.005 TON` –Ω–∞ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
**–†–∏—Å–∫–∏**: ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ. 0.005 TON –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è wallet state (~500 –±–∞–π—Ç)

---

### 2. **–£–º–µ–Ω—å—à–∏—Ç—å `gas_consumption` –¥–æ 0.007 TON**

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (`jetton-wallet.fc:24`):
```func
const gas_consumption = 10000000; ;; 0.01 TON
```

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π**:
```func
const gas_consumption = 7000000; ;; 0.007 TON ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- –†–µ–∞–ª—å–Ω—ã–π gas –¥–ª—è transfer ~5000-6000 –µ–¥–∏–Ω–∏—Ü
- –¶–µ–Ω–∞ gas: 6905 –µ–¥–∏–Ω–∏—Ü = 1 TON
- –ò—Ç–æ–≥–æ: ~6000 * 6905 = ~5,000,000 nanoTON
- + 30% –∑–∞–ø–∞—Å = ~7,000,000 nanoTON

**–≠–∫–æ–Ω–æ–º–∏—è**: `0.003 TON` –Ω–∞ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
**–†–∏—Å–∫–∏**: ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ

---

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Mint operation**

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (`test/lib/jetton-minter.ts:30`):
```typescript
.storeCoins(toNano(0.2)) // gas fee
```

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π**:
```typescript
.storeCoins(toNano(0.08)) // 0.08 TON –≤–º–µ—Å—Ç–æ 0.2 ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
```

**–≠–∫–æ–Ω–æ–º–∏—è**: `0.12 TON` –ø—Ä–∏ –º–∏–Ω—Ç–∏–Ω–≥–µ
**–†–∏—Å–∫–∏**: ‚úÖ –ù–µ—Ç. 0.08 TON –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è wallet + internal transfer

---

### 4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Transfer fees**

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (`jetton-wallet.fc:88-93`):
```func
throw_unless(709, msg_value >
                   forward_ton_amount +
                   fwd_count * fwd_fee +
                   (2 * gas_consumption + min_tons_for_storage));
```

–° –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏:
- `2 * gas_consumption` = 2 * 0.007 = 0.014 TON
- `min_tons_for_storage` = 0.005 TON
- –ò—Ç–æ–≥–æ –º–∏–Ω–∏–º—É–º: **0.019 TON** –≤–º–µ—Å—Ç–æ 0.03 TON

**–≠–∫–æ–Ω–æ–º–∏—è**: `0.011 TON` –Ω–∞ –∫–∞–∂–¥–æ–º transfer

---

## üîß **–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `minter-contract-main/contracts/jetton-wallet.fc`
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 23-24:

```func
const min_tons_for_storage = 5000000; ;; 0.005 TON (–±—ã–ª–æ 0.01)
const gas_consumption = 7000000;       ;; 0.007 TON (–±—ã–ª–æ 0.01)
```

3. –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:
```bash
cd minter-contract-main
npm install
npm run build
```

4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```bash
cp build/*.compiled.json ../hosting-deploy-upload/api/contracts/
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ deployer

–û–±–Ω–æ–≤–∏—Ç–µ `hosting-deploy-upload/api/jetton-deployer.js`:

```javascript
static createMintBody(ownerAddress, jettonAmount) {
    const OPS = {
        Mint: 21,
        InternalTransfer: 0x178d4519
    };

    return beginCell()
        .storeUint(OPS.Mint, 32)
        .storeUint(0, 64)
        .storeAddress(Address.parse(ownerAddress))
        .storeCoins(toNano('0.08')) // ‚úÖ 0.08 –≤–º–µ—Å—Ç–æ 0.2
        .storeRef(
            beginCell()
                .storeUint(OPS.InternalTransfer, 32)
                .storeUint(0, 64)
                .storeCoins(jettonAmount)
                .storeAddress(null)
                .storeAddress(null)
                .storeCoins(0)
                .storeBit(false)
                .endCell()
        )
        .endCell();
}
```

---

## üí∞ **–ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —ç–∫–æ–Ω–æ–º–∏–∏**

| –û–ø–µ—Ä–∞—Ü–∏—è | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –≠–∫–æ–Ω–æ–º–∏—è |
|----------|------|-------|----------|
| **Deploy Minter** | 0.05 TON | 0.04 TON | **0.01 TON (20%)** |
| **Mint** | 0.25 TON | 0.13 TON | **0.12 TON (48%)** |
| **Transfer** | 0.05 TON | 0.04 TON | **0.01 TON (20%)** |
| **–û–±—â–∞—è —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ 1000 transfer** | 50 TON | 40 TON | **10 TON** |

---

## ‚ö†Ô∏è **–û–ü–ê–°–ù–´–ï –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### ‚ùå 1. –£–±—Ä–∞—Ç—å storage reserve –ø–æ–ª–Ω–æ—Å—Ç—å—é

```func
const min_tons_for_storage = 0; ;; ‚ùå –û–ü–ê–°–ù–û!
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª—ë–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ

---

### ‚ùå 2. –°–Ω–∏–∑–∏—Ç—å gas_consumption –Ω–∏–∂–µ 0.005 TON

```func
const gas_consumption = 3000000; ;; 0.003 TON ‚ùå –û–ü–ê–°–ù–û!
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ–π—Ç–∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

---

### ‚ùå 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mode 128 (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏)

```func
send_raw_message(msg.end_cell(), 128); ;; ‚ùå –û–ü–ê–°–ù–û!
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üìà **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

### –î–ª—è **Mainnet** (Production):

```func
const min_tons_for_storage = 5000000;  ;; 0.005 TON
const gas_consumption = 8000000;        ;; 0.008 TON (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
```

### –î–ª—è **Testnet** (Development):

```func
const min_tons_for_storage = 5000000;  ;; 0.005 TON
const gas_consumption = 7000000;        ;; 0.007 TON (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ)
```

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π**

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

```bash
cd minter-contract-main
npm test
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ Transfer —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–µ–π
- ‚úÖ Mint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Burn –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫

---

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è**

–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ:
1. **Bounce rate** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <1%
2. **Average gas used** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~0.005-0.008 TON
3. **Failed transactions** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0

–ï—Å–ª–∏ bounce rate >5% - —É–≤–µ–ª–∏—á—å—Ç–µ `gas_consumption` –æ–±—Ä–∞—Ç–Ω–æ –¥–æ 0.01 TON.

---

## üîó **–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏**

- [TON Gas](https://docs.ton.org/develop/smart-contracts/fees)
- [Jetton Standard](https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md)
- [Contract Best Practices](https://docs.ton.org/develop/smart-contracts/guidelines)

---

## üí° **–ò—Ç–æ–≥–æ**

**–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–≥—É—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ 20-48%** –±–µ–∑ —Ä–∏—Å–∫–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞!

–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–∏–º–µ–Ω–∏—Ç—å **–≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –∏–∑ —ç—Ç–æ–≥–æ –≥–∞–π–¥–∞. –≠—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –≤–∞–º –∏ –≤–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º **–¥–µ—Å—è—Ç–∫–∏ TON** –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ.

